<!DOCTYPE html>
<html>
  <head>
    <!-- JS for Axios -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!-- JS for Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <!-- JS for Chart -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <title>COVID Dashboard</title>
    <style>
      body {
        background-color: #00fffb;
      }

      ol {
        font-family: monospace;
        font-weight: normal;
        color: #002aff;
        font-size: 20;

      p1 {
        font-family: monospace;
        font-weight: normal;
        color: #002aff;
        font-size: 125%;
      }

      h2 {
        font-family: monospace;
        font-weight: normal;
        color: #0000FF;
        font-size: 75%;
      }

      h3 {
        font-family: monospace;
        font-weight: normal;
        color: #0000FF;
        font-size: 75%;
      }

      </style>
  </head>
  <body>
    <nav>
      <div class="nav-wrapper grey ">
        <a href="home.html" class="brand-logo right" style="padding-right:10px">TheSoupMasta</a>
        <ul id="nav-mobile" class="left hide-on-med-and-down">
          <li><a href="home.html">The Hub</a></li>
          <li><a href="download.html">Download</a></li>
          <li><a href="index.html">Random Facts Website</a></li>
          <li><a href="calculator.html">Times Tables</a></li>
          <li><a href="dash.html">Covid Information</a></li>
          <li><a href="about.html">About Me</a></li>
        </ul>
      </div>
    </nav>

    <div class="row">
      <div class="col s12 m6">
        <div class="card blue-grey darken-1">
          <div class="card-content blue-text">
            <span class="card-title">Covid Information</span>
            <p>These are the top 10 countries currently in COVID-19 cases.</p>
            <div id="list"></div>
          </div>
          <div class="card-action">
            <a href="https://www.cdc.gov/coronavirus/2019-nCoV/index.html">COVID-19 General Information</a>
            <a href="https://www.trackcorona.live/api/countries">API Data</a>
            <a href="https://en.wikipedia.org/wiki/COVID-19_pandemic">Wikipedia Article</a>
          </div>
        </div>
      </div>
      <div class="col s12 m6">
        <div class="card blue-grey darken-1">
          <div class="card-content blue-text">
            <span class="card-title">Covid Information</span>
            <p>These are the top 10 countries currently in COVID-19 deaths.</p>
            <div id="list1"></div>
          </div>
          <div class="card-action">
            <a href="https://www.cdc.gov/coronavirus/2019-nCoV/index.html">COVID-19 General Information</a>
            <a href="https://www.trackcorona.live/api/countries">API Data</a>
            <a href="https://en.wikipedia.org/wiki/COVID-19_pandemic">Wikipedia Article</a>
          </div>
        </div>
      </div>
    </div>
    <div style="margin:20px">
      <br>
      <p1>The following excerpt is from Wikipedia, the free encyclopedia. Link is in button above.
      <br>
      "The COVID-19 pandemic, also known as the coronavirus pandemic, is an ongoing global pandemic of coronavirus disease 2019 (COVID-19), which is caused by severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2). The virus was first identified in December 2019 in Wuhan, China. The World Health Organization declared a Public Health Emergency of International Concern on 30 January 2020, and later declared a pandemic on 11 March 2020. As of 21 June 2021, more than 178 million cases have been confirmed, with more than 3.86 million confirmed deaths attributed to COVID-19, making it one of the deadliest pandemics in history.
      <br>
      The severity of COVID-19 symptoms is highly variable, ranging from unnoticeable to life-threatening. Severe illness is more likely in elderly COVID-19 patients, as well as those who have underlying medical conditions. COVID-19 transmits when people breathe in air contaminated by droplets and small airborne particles. The risk of breathing these in is highest when people are in close proximity, but they can be inhaled over longer distances, particularly indoors. Transmission can also occur if splashed or sprayed with contaminated fluids, in the eyes, nose or mouth, and, rarely, via contaminated surfaces. People remain contagious for up to 20 days, and can spread the virus even if they do not develop any symptoms.
      <br>
      Recommended preventive measures include social distancing, wearing face masks in public, ventilation and air-filtering, hand washing, covering one's mouth when sneezing or coughing, disinfecting surfaces, and monitoring and self-isolation for people exposed or symptomatic. Several vaccines have been developed and widely distributed in most developed countries since December 2020. Current treatments focus on addressing symptoms, but work is underway to develop medications that inhibit the virus. Authorities worldwide have responded by implementing travel restrictions, lockdowns and quarantines, workplace hazard controls, and business closures. Numerous jurisdictions have also worked to increase testing capacity and trace contacts of the infected.
      <br>
      The pandemic has resulted in significant global social and economic disruption, including the largest global recession since the Great Depression of the 1930s. It has led to widespread supply shortages exacerbated by panic buying, agricultural disruption, and food shortages. However, there have also been decreased emissions of pollutants and greenhouse gases. Numerous educational institutions and public areas have been partially or fully closed, and many events have been cancelled or postponed. Misinformation has circulated through social media and mass media, and political tensions have been exacerbated. The pandemic has raised issues of racial and geographic discrimination, health equity, and the balance between public health imperatives and individual rights."</p1>
      <br>
    </div>
    <div class="row">
      <div class="col s12 m6">
        <div class="card blue-grey darken-1">
          <div class="card-content blue-text">
            <span class="card-title">Covid Map</span>
            <p>This is a map of the countries logging COVID cases.</p>
            <div id="map" style="width:600px; height:400px;"></div>
          </div>
          <div class="card-action">
            <a href="https://www.cdc.gov/coronavirus/2019-nCoV/index.html">COVID-19 General Information</a>
            <a href="https://www.trackcorona.live/api/countries">API Data</a>
            <a href="https://en.wikipedia.org/wiki/COVID-19_pandemic">Wikipedia Article</a>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s12 m6">
        <div class="card blue-grey darken-1">
          <div class="card-content blue-text">
            <span class="card-title">Covid Map</span>
            <p>This is a map of the countries logging COVID cases.</p>
            <canvas id="bar-chart" width="800" height="450"></canvas>
          </div>
          <div class="card-action">
            <a href="https://www.cdc.gov/coronavirus/2019-nCoV/index.html">COVID-19 General Information</a>
            <a href="https://www.trackcorona.live/api/countries">API Data</a>
            <a href="https://en.wikipedia.org/wiki/COVID-19_pandemic">Wikipedia Article</a>
          </div>
        </div>
      </div>
    </div>

    <div style="margin:15px;">
      <br>
      <br>
      <br>
      <br>
      <p1>This website is made with the help of Materialize and atom.io, you can visit the website by clicking the following hyperlinks. Warning: The hyperlinks will lead to a 3rd party website. Download content from those websites at your own risk.</p1>
      <br>
      <br>
      <a href="https://materializecss.com/">Materialize</a>
      <br>
      <br>
      <a href="https://atom.io/">Atom.io</a>
    </div>
  </body>
  <script>
    axios.get("https://www.trackcorona.live/api/countries").then(response => {
      // console.log(response);
      response.data.data.sort(function(a, b) {
        return b.confirmed - a.confirmed;
      })
      console.log(response.data.data)
      pushData(response);
      pushChart(response);
    })

    function pushData(response) {
      var divHandle = document.getElementById("list");
      var myHTML = "<ul class='collection'>";
        for (var i = 0; i < 10; i++) {
          myHTML = myHTML + "<a href="+"https://www.google.com/search?q="+response.data.data[i].location+" class='collection-item'>" + response.data.data[i].location + "    Confirmed: " + response.data.data[i].confirmed + "    Deaths: " + response.data.data[i].dead + "</a>";
          }
        myHTML = myHTML + "</ul>";
        divHandle.innerHTML = myHTML;
      }

      axios.get("https://www.trackcorona.live/api/countries").then(response1 => {
        // console.log(response);
        response1.data.data.sort(function(a, b) {
          return b.dead - a.dead;
        })
        console.log(response1.data.data)
        pushData1(response1);
        pushMap(response1);
      })

      function pushChart(response) {
        var data = response.data.data;
        var countries = [];
        var confirmed = [];
        for (var i = 0; i < 10; i++) {
          countries.push(data[i].location);
          confirmed.push(data[i].confirmed);
            }

        new Chart(document.getElementById("bar-chart"), {
          type: 'bar',
          data: {
            labels: countries,
            datasets: [
              {
                label: "Confirmed Cases (millions)",
                backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850", "#0059ff", "#ff00d4", "#ffc400", "#ff0000", "#00fbff"],
                data: confirmed
              }
            ]
          },
          options: {
            legend: { display: false },
            title: {
              display: true,
              text: 'Covid Cases'
            }
          }
});
      }

      function pushData1(response1) {
        var divHandle1 = document.getElementById("list1");
        var myHTML = "<ul class='collection'>";
          for (var i = 0; i < 10; i++) {
            myHTML = myHTML + "<a href="+"https://www.google.com/search?q="+response1.data.data[i].location+" class='collection-item'>" + response1.data.data[i].location + "    Confirmed: " + response1.data.data[i].confirmed + "    Deaths: " + response1.data.data[i].dead + "</a>";
            }
          myHTML = myHTML + "</ul>";
          divHandle1.innerHTML = myHTML;
        }

      function pushMap(response1) {
        var southWest = L.latLng(-230, -230),
        northEast = L.latLng(230, 230),
        bounds = L.latLngBounds(southWest, northEast);

        var map = L.map('map', {
            maxBounds: bounds,
            center: [0, 0],
            zoom: 13
          });


        map.locate({setView:true, maxZoom:8});

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // L.marker([51.5, -0.09]).addTo(map)
        //   .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
        //   .openPopup();

        var data = response1.data.data;

        for (var i = 0; i < data.length; i++) {
            L.circle([data[i].latitude, data[i].longitude], {color: "red", radius:(data[i].confirmed/20)}).addTo(map)
            .bindPopup(data[i].location + " <br>Confirmed: " + data[i].confirmed + ' <br>Deaths: ' + data[i].dead + ' <br><br><a href="https://www.worldometers.info/coronavirus/country/' + data[i].location + '" "class="btn">World-O-Meter Link</a>')
            .openPopup();

            L.circle([data[i].latitude, data[i].longitude], {color: "black", radius:(data[i].dead/2)}).addTo(map)
            .bindPopup(data[i].location + " <br>Confirmed: " + data[i].confirmed + ' <br>Deaths: ' + data[i].dead + ' <br><br><a href="https://www.worldometers.info/coronavirus/country/' + data[i].location + '" "class="btn">World-O-Meter Link</a>')
            .openPopup();

          }
        }
  </script>
</html>
